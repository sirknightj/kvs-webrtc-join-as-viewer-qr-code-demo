const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-jYqURaIz.js","assets/chunk-WWGJGFF6-Dko2PgRF.js"])))=>i.map(i=>d[i]);
import{y as Vs,w as Ks,a as j,p as B}from"./chunk-WWGJGFF6-Dko2PgRF.js";const Ws=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),Gs=t=>({httpHandler:t.httpHandler()});var He;(function(t){t.HTTP="http",t.HTTPS="https"})(He||(He={}));var Ze;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(Ze||(Ze={}));const Qt="__smithy_context";class X{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new X({...e,headers:{...e.headers}});return r.query&&(r.query=Qs(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return X.clone(this)}}function Qs(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}class De{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}const Js=t=>e=>async r=>{if(!X.isInstance(r.request))return e(r);const{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return e(r)},Ys={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Xs=t=>({applyToStack:e=>{e.add(Js(t),Ys)}}),Zs=()=>(t,e)=>async r=>{try{const n=await t(r),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,d=c??e.inputFilterSensitiveLog,l=u??e.outputFilterSensitiveLog,{$metadata:f,...h}=n.output;return o?.info?.({clientName:s,commandName:i,input:d(r.input),output:l(h),metadata:f}),n}catch(n){const{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:u(r.input),error:n,metadata:n.$metadata}),n}},ei={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},ti=t=>({applyToStack:e=>{e.add(Zs(),ei)}}),ri={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},ni=()=>t=>async e=>t(e),si=t=>({applyToStack:e=>{e.add(ni(),ri)}}),Oe=t=>t[Qt]||(t[Qt]={}),he=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},ii=(t,e)=>{if(!e||e.length===0)return t;const r=[];for(const n of e)for(const s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(const n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r};function oi(t){const e=new Map;for(const r of t)e.set(r.schemeId,r);return e}const ai=(t,e)=>(r,n)=>async s=>{const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),o=t.authSchemePreference?await t.authSchemePreference():[],a=ii(i,o),c=oi(t.httpAuthSchemes),u=Oe(n),d=[];for(const l of a){const f=c.get(l.schemeId);if(!f){d.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}const h=f.identityProvider(await e.identityProviderConfigProvider(t));if(!h){d.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:g={},signingProperties:m={}}=l.propertiesExtractor?.(t,n)||{};l.identityProperties=Object.assign(l.identityProperties||{},g),l.signingProperties=Object.assign(l.signingProperties||{},m),u.selectedHttpAuthScheme={httpAuthOption:l,identity:await h(l.identityProperties),signer:f.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(d.join(`
`));return r(s)},ci={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},ui=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(ai(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),ci)}}),li={name:"serializerMiddleware"},di=t=>e=>{throw e},fi=(t,e)=>{},hi=t=>(e,r)=>async n=>{if(!X.isInstance(n.request))return e(n);const i=Oe(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u=await e({...n,request:await c.sign(n.request,a,o)}).catch((c.errorHandler||di)(o));return(c.successHandler||fi)(u.response,o),u},gi={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},mi=t=>({applyToStack:e=>{e.addRelativeTo(hi(),gi)}}),Be=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},zn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ar=Object.entries(zn).reduce((t,[e,r])=>(t[r]=Number(e),t),{}),pi=zn.split(""),Me=6,ze=8,yi=63,je=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const r=new ArrayBuffer(e),n=new DataView(r);for(let s=0;s<t.length;s+=4){let i=0,o=0;for(let u=s,d=s+3;u<=d;u++)if(t[u]!=="="){if(!(t[u]in Ar))throw new TypeError(`Invalid character ${t[u]} in base64 string.`);i|=Ar[t[u]]<<(d-u)*Me,o+=Me}else i>>=Me;const a=s/4*3;i>>=o%ze;const c=Math.floor(o/ze);for(let u=0;u<c;u++){const d=(c-u-1)*ze;n.setUint8(a+u,(i&255<<d)>>d)}}return new Uint8Array(r)},_e=t=>new TextEncoder().encode(t),qe=t=>typeof t=="string"?_e(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),it=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function tr(t){let e;typeof t=="string"?e=_e(t):e=t;const r=typeof e=="object"&&typeof e.length=="number",n=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let o=0,a=0;for(let u=i,d=Math.min(i+3,e.length);u<d;u++)o|=e[u]<<(d-u-1)*ze,a+=ze;const c=Math.ceil(a/Me);o<<=c*Me-a;for(let u=1;u<=c;u++){const d=(c-u)*Me;s+=pi[(o&yi<<d)>>d]}s+="==".slice(0,4-c)}return s}class Te extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?Te.mutate(je(e)):Te.mutate(_e(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,Te.prototype),e}transformToString(e="utf-8"){return e==="base64"?tr(this):it(this)}}const Re=t=>encodeURIComponent(t).replace(/[!'()*]/g,wi),wi=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function Si(t){const e=[];for(let r of Object.keys(t).sort()){const n=t[r];if(r=Re(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)e.push(`${r}=${Re(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Re(n)}`),e.push(s)}}return e.join("&")}function vr(t,e){return new Request(t,e)}function Ei(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{const n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}const ft={supported:void 0};class rr{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new rr(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),ft.supported===void 0&&(ft.supported=typeof Request<"u"&&"keepalive"in vr("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);const s=n??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(r?.aborted){const w=new Error("Request aborted");return w.name="AbortError",Promise.reject(w)}let a=e.path;const c=Si(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){const w=e.username??"",E=e.password??"";u=`${w}:${E}@`}const{port:d,method:l}=e,f=`${e.protocol}//${u}${e.hostname}${d?`:${d}`:""}${a}`,h=l==="GET"||l==="HEAD"?void 0:e.body,g={body:h,headers:new Headers(e.headers),method:l,credentials:o};this.config?.cache&&(g.cache=this.config.cache),h&&(g.duplex="half"),typeof AbortController<"u"&&(g.signal=r),ft.supported&&(g.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(g,this.config.requestInit(e));let m=()=>{};const y=vr(f,g),p=[fetch(y).then(w=>{const E=w.headers,S={};for(const b of E.entries())S[b[0]]=b[1];return w.body!=null?{response:new De({headers:S,reason:w.statusText,statusCode:w.status,body:w.body})}:w.blob().then(b=>({response:new De({headers:S,reason:w.statusText,statusCode:w.status,body:b})}))}),Ei(s)];return r&&p.push(new Promise((w,E)=>{const S=()=>{const _=new Error("Request aborted");_.name="AbortError",E(_)};if(typeof r.addEventListener=="function"){const _=r;_.addEventListener("abort",S,{once:!0}),m=()=>_.removeEventListener("abort",S)}else r.onabort=S})),Promise.race(p).finally(m)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}}const bi=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):Ti(t):Ri(t);async function Ti(t){const e=await Ci(t),r=je(e);return new Uint8Array(r)}async function Ri(t){const e=[],r=t.getReader();let n=!1,s=0;for(;!n;){const{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}const i=new Uint8Array(s);let o=0;for(const a of e)i.set(a,o),o+=a.length;return i}function Ci(t){return new Promise((e,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}const Fn={},Jt={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Fn[t]=e,Jt[e]=t}function Ai(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const n=t.slice(r,r+2).toLowerCase();if(n in Jt)e[r/2]=Jt[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function Ce(t){let e="";for(let r=0;r<t.byteLength;r++)e+=Fn[t[r]];return e}const et=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Te.mutate(t);if(!t)return Te.mutate(new Uint8Array);const r=e.streamCollector(t);return Te.mutate(await r)};function xr(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const Je=t=>typeof t=="function"?t():t,Hn=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s}),vi=t=>(e,r)=>async n=>{const{response:s}=await e(n),{operationSchema:i}=Oe(r),[,o,a,c,u,d]=i??[];try{const l=await t.protocol.deserializeResponse(Hn(o,a,c,u,d),{...t,...r},s);return{response:s,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in l)){const f="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+f}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(f):r.logger?.warn?.(f)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText);try{if(De.isInstance(s)){const{headers:h={}}=s,g=Object.entries(h);l.$metadata={httpStatusCode:s.statusCode,requestId:ht(/^x-[\w-]+-request-?id$/,g),extendedRequestId:ht(/^x-[\w-]+-id-2$/,g),cfId:ht(/^x-[\w-]+-cf-id$/,g)}}}catch{}}throw l}},ht=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],xi=t=>(e,r)=>async n=>{const{operationSchema:s}=Oe(r),[,i,o,a,c,u]=s??[],d=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,l=await t.protocol.serializeRequest(Hn(i,o,a,c,u),n.input,{...t,...r,endpoint:d});return e({...n,request:l})},Pi={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ii={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ni(t){return{applyToStack:e=>{e.add(xi(t),Ii),e.add(vi(t),Pi),t.protocol.setSerdeContext(t)}}}function Ue(t){if(typeof t=="object")return t;t=t|0;const e={};let r=0;for(const n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}class U{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=U.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;const n=[];let s=e,i=e;for(this._isMemberSchema=!1;gt(s);)n.push(s[1]),s=s[0],i=Je(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let o=n.length-1;o>=0;--o){const a=n[o];Object.assign(this.memberTraits,Ue(a))}}else this.memberTraits=0;if(i instanceof U){const o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=Je(i),Mi(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){const r=Je(e);if(r instanceof U)return r;if(gt(r)){const[n,s]=r;if(n instanceof U)return Object.assign(n.getMergedTraits(),Ue(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new U(r)}getSchema(){const e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){const{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){const e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){const e=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return e(r)||e(n)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Ue(this.memberTraits)}getOwnTraits(){return Ue(this.traits)}getKeySchema(){const[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const n=this.getSchema(),s=e?15:n[4]??0;return $e([s,0],"key")}getValueSchema(){const e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(i!=null)return $e([i,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){const n=r[4].indexOf(e),s=r[5][n];return $e(gt(s)?s:[s,0],e)}if(this.isDocumentSchema())return $e([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],$e([e[5][r],0],e[4][r])]}}function $e(t,e){if(t instanceof U)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const r=U;return new r(t,e)}const gt=t=>Array.isArray(t)&&t.length===2,Mi=t=>Array.isArray(t)&&t.length>=5;class L{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,n=new Map){this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return L.registries.has(e)||L.registries.set(e,new L(e)),L.registries.get(e)}register(e,r){const n=this.normalizeShapeId(e);L.for(n.split("#")[0]).schemas.set(n,r)}getSchema(e){const r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){const n=e,s=L.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(e){const r=e;return L.for(r[1]).exceptions.get(r)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}const Di=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ki(t){const e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,d=o<10?`0${o}`:`${o}`,l=a<10?`0${a}`:`${a}`;return`${Di[n]}, ${c} ${_i[r]} ${e} ${u}:${d}:${l} GMT`}const Pr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),q=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),jn=()=>{if(Pr)return Pr();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,q[t[0]]+q[t[1]]+q[t[2]]+q[t[3]]+"-"+q[t[4]]+q[t[5]]+"-"+q[t[6]]+q[t[7]]+"-"+q[t[8]]+q[t[9]]+"-"+q[t[10]]+q[t[11]]+q[t[12]]+q[t[13]]+q[t[14]]+q[t[15]]},be=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};be.from=t=>t&&typeof t=="object"&&(t instanceof be||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?be(String(t)):be(JSON.stringify(t));be.fromObject=be.from;const nr="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",sr="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",ir="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",qn="(\\d?\\d)",Vn="(\\d{4})",Oi=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),$i=new RegExp(`^${nr}, ${qn} ${sr} ${Vn} ${ir} GMT$`),Li=new RegExp(`^${nr}, ${qn}-${sr}-(\\d\\d) ${ir} GMT$`),Ui=new RegExp(`^${nr} ${sr} ( [1-9]|\\d\\d) ${ir} ${Vn}$`),Bi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],zi=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},Fi=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");const e=Oi.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);const[,r,n,s,i,o,a,,c,u]=e;fe(n,1,12),fe(s,1,31),fe(i,0,23),fe(o,0,59),fe(a,0,60);const d=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(i),Number(o),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(d.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){const[,l,f,h]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],g=l==="-"?1:-1;d.setTime(d.getTime()+g*(Number(f)*60*60*1e3+Number(h)*60*1e3))}return d},Hi=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,i,o,a,c;if((c=$i.exec(t))?[,e,r,n,s,i,o,a]=c:(c=Li.exec(t))?([,e,r,n,s,i,o,a]=c,n=(Number(n)+1900).toString()):(c=Ui.exec(t))&&([,r,e,s,i,o,a,n]=c),n&&o){const u=Date.UTC(Number(n),Bi.indexOf(r),Number(e),Number(s),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);fe(e,1,31),fe(s,0,23),fe(i,0,59),fe(o,0,60);const d=new Date(u);return d.setUTCFullYear(Number(n)),d}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)};function fe(t,e,r){const n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}const ji=t=>{const e=t.length,r=[];let n=!1,s,i=0;for(let o=0;o<e;++o){const a=t[o];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(i,o)),i=o+1);break}s=a}return r.push(t.slice(i)),r.map(o=>{o=o.trim();const a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})},Ir=/^-?\d*(\.\d+)?$/;class ot{string;type;constructor(e,r){if(this.string=e,this.type=r,!Ir.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;const r=e;return ot.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&Ir.test(r.string)}}const qi="modulepreload",Vi=function(t){return"/kvs-webrtc-join-as-viewer-qr-code-demo/client/"+t},Nr={},Ki=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=c(r.map(u=>{if(u=Vi(u),u in Nr)return;Nr[u]=!0;const d=u.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${l}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":qi,d||(f.as="script"),f.crossOrigin="",f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),d)return new Promise((h,g)=>{f.addEventListener("load",h),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};class Kn{serdeContext;setSerdeContext(e){this.serdeContext=e}}class Wi extends Kn{options;constructor(e){super(),this.options=e}getRequestType(){return X}getResponseType(){return De}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(const[n,s]of r.url.searchParams.entries())e.query[n]=s;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,n){const s=U.of(r.input),i=Ue(r.traits??{});if(i.endpoint){let o=i.endpoint?.[0];if(typeof o=="string"){const a=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(const[c]of a){const u=n[c];if(typeof u!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);o=o.replace(`{${c}}`,u)}e.hostname=o+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){const{EventStreamSerde:e}=await Ki(async()=>{const{EventStreamSerde:r}=await import("./index-jYqURaIz.js");return{EventStreamSerde:r}},__vite__mapDeps([0,1]));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,n,s,i){return[]}getEventStreamMarshaller(){const e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}class Gi extends Wi{async serializeRequest(e,r,n){const s=this.serializer,i={},o={},a=await n.endpoint(),c=U.of(e?.input),u=c.getSchema();let d;const l=new X({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:i,headers:o,body:void 0});a&&(this.updateServiceEndpoint(l,a),this.setHostPrefix(l,e,r));const f={...r};if(r){const h=c.getEventStreamMember();if(h){if(f[h]){const g={};for(const[m,y]of c.structIterator())m!==h&&f[m]&&(s.write(y,f[m]),g[m]=s.flush());d=await this.serializeEventStream({eventStream:f[h],requestSchema:c,initialRequest:g})}}else s.write(u,f),d=s.flush()}return l.headers=o,l.query=i,l.body=d,l.method="POST",l}async deserializeResponse(e,r,n){const s=this.deserializer,i=U.of(e.output),o={};if(n.statusCode>=300){const c=await et(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(e,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(const c in n.headers){const u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}const a=i.getEventStreamMember();if(a)o[a]=await this.deserializeEventStream({response:n,responseSchema:i,initialResponseContainer:o});else{const c=await et(n.body,r);c.byteLength>0&&Object.assign(o,await s.read(i,c))}return o.$metadata=this.deserializeMetadata(n),o}}function Wn(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();const{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:i||r?5:void 0:void 0)??e.timestampFormat.default}class Qi extends Kn{settings;constructor(e){super(),this.settings=e}read(e,r){const n=U.of(e);if(n.isListSchema())return ji(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??je)(r);if(n.isTimestampSchema())switch(Wn(n,this.settings)){case 5:return Fi(r);case 6:return Hi(r);case 7:return zi(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){const s=n.getMergedTraits().mediaType;let i=r;if(s)return n.getMergedTraits().httpHeader&&(i=this.base64ToUtf8(i)),(s==="application/json"||s.endsWith("+json"))&&(i=be.from(i)),i}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new ot(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??it)((this.serdeContext?.base64Decoder??je)(e))}}function Ji(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}class Yi{authSchemes=new Map;constructor(e){for(const[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}class Xi{async sign(e,r,n){return e}}const Zi=t=>function(r){return Gn(r)&&r.expiration.getTime()-Date.now()<t},eo=3e5,to=Zi(eo),Gn=t=>t.expiration!==void 0,ro=(t,e,r)=>{if(t===void 0)return;const n=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,o,a=!1;const c=async u=>{i||(i=n(u));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return e===void 0?async u=>((!o||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!o||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(e(s)&&await c(u),s):(a=!0,s))},no=void 0;function so(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function io(t){const e=Be(t.userAgentAppId??no),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{const n=await e();if(!so(n)){const s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}class oo{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){const n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="";const{parameters:n}=this;if(n.length===0)return!1;for(const s of n){const i=String(e[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}}const ao=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Qn=t=>ao.test(t)||t.startsWith("[")&&t.endsWith("]"),co=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),at=(t,e=!1)=>{if(!e)return co.test(t);const r=t.split(".");for(const n of r)if(!at(n))return!1;return!0},tt={},Ve="endpoints";function we(t){return typeof t!="object"||t==null?t:"ref"in t?`$${we(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(we).join(", ")})`:JSON.stringify(t,null,2)}class Z extends Error{constructor(e){super(e),this.name="EndpointError"}}const uo=(t,e)=>t===e,lo=t=>{const e=t.split("."),r=[];for(const n of e){const s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new Z(`Path: '${t}' does not end with ']'`);const i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new Z(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},Jn=(t,e)=>lo(e).reduce((r,n)=>{if(typeof r!="object")throw new Z(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),fo=t=>t!=null,ho=t=>!t,mt={[He.HTTP]:80,[He.HTTPS]:443},go=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:f,port:h,protocol:g="",path:m="",query:y={}}=t,p=new URL(`${g}//${f}${h?`:${h}`:""}${m}`);return p.search=Object.entries(y).map(([w,E])=>`${w}=${E}`).join("&"),p}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const r=e.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;const c=o.slice(0,-1);if(!Object.values(He).includes(c))return null;const u=Qn(s),d=r.includes(`${n}:${mt[c]}`)||typeof t=="string"&&t.includes(`${n}:${mt[c]}`),l=`${n}${d?`:${mt[c]}`:""}`;return{scheme:c,authority:l,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},mo=(t,e)=>t===e,po=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),yo=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),wo={booleanEquals:uo,getAttr:Jn,isSet:fo,isValidHostLabel:at,not:ho,parseURL:go,stringEquals:mo,substring:po,uriEncode:yo},Yn=(t,e)=>{const r=[],n={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){r.push(t.slice(s));break}r.push(t.slice(s,i));const o=t.indexOf("}",i);if(o===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(r.push(t.slice(i+1,o)),s=o+2);const a=t.substring(i+1,o);if(a.includes("#")){const[c,u]=a.split("#");r.push(Jn(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},So=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],ct=(t,e,r)=>{if(typeof t=="string")return Yn(t,r);if(t.fn)return Zn.callFunction(t,r);if(t.ref)return So(t,r);throw new Z(`'${e}': ${String(t)} is not a string, function or reference.`)},Xn=({fn:t,argv:e},r)=>{const n=e.map(i=>["boolean","number"].includes(typeof i)?i:Zn.evaluateExpression(i,"arg",r)),s=t.split(".");return s[0]in tt&&s[1]!=null?tt[s[0]][s[1]](...n):wo[t](...n)},Zn={evaluateExpression:ct,callFunction:Xn},Eo=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new Z(`'${t}' is already defined in Reference Record.`);const n=Xn(e,r);return r.logger?.debug?.(`${Ve} evaluateCondition: ${we(e)} = ${we(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},or=(t=[],e)=>{const r={};for(const n of t){const{result:s,toAssign:i}=Eo(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};i&&(r[i.name]=i.value,e.logger?.debug?.(`${Ve} assign: ${i.name} := ${we(i.value)}`))}return{result:!0,referenceRecord:r}},bo=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{const o=ct(i,"Header value entry",e);if(typeof o!="string")throw new Z(`Header '${n}' value '${o}' is not a string`);return o})}),{}),es=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:rs.getEndpointProperty(s,e)}),{}),ts=(t,e)=>{if(Array.isArray(t))return t.map(r=>ts(r,e));switch(typeof t){case"string":return Yn(t,e);case"object":if(t===null)throw new Z(`Unexpected endpoint property: ${t}`);return rs.getEndpointProperties(t,e);case"boolean":return t;default:throw new Z(`Unexpected endpoint property type: ${typeof t}`)}},rs={getEndpointProperty:ts,getEndpointProperties:es},To=(t,e)=>{const r=ct(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Z(`Endpoint URL must be a string, got ${typeof r}`)},Ro=(t,e)=>{const{conditions:r,endpoint:n}=t,{result:s,referenceRecord:i}=or(r,e);if(!s)return;const o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:c,headers:u}=n;return e.logger?.debug?.(`${Ve} Resolving endpoint from template: ${we(n)}`),{...u!=null&&{headers:bo(u,o)},...c!=null&&{properties:es(c,o)},url:To(a,o)}},Co=(t,e)=>{const{conditions:r,error:n}=t,{result:s,referenceRecord:i}=or(r,e);if(s)throw new Z(ct(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},ns=(t,e)=>{for(const r of t)if(r.type==="endpoint"){const n=Ro(r,e);if(n)return n}else if(r.type==="error")Co(r,e);else if(r.type==="tree"){const n=ss.evaluateTreeRule(r,e);if(n)return n}else throw new Z(`Unknown endpoint rule: ${r}`);throw new Z("Rules evaluation failed")},Ao=(t,e)=>{const{conditions:r,rules:n}=t,{result:s,referenceRecord:i}=or(r,e);if(s)return ss.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...i}})},ss={evaluateRules:ns,evaluateTreeRule:Ao},vo=(t,e)=>{const{endpointParams:r,logger:n}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${Ve} Initial EndpointParams: ${we(r)}`);const o=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,d])=>[u,d.default]);if(o.length>0)for(const[u,d]of o)r[u]=r[u]??d;const a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(const u of a)if(r[u]==null)throw new Z(`Missing required parameter: '${u}'`);const c=ns(i,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${Ve} Resolved endpoint: ${we(c)}`),c},is=(t,e=!1)=>{if(e){for(const r of t.split("."))if(!is(r))return!1;return!0}return!(!at(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Qn(t))},Mr=":",xo="/",Po=t=>{const e=t.split(Mr);if(e.length<6)return null;const[r,n,s,i,o,...a]=e;if(r!=="arn"||n===""||s===""||a.join(Mr)==="")return null;const c=a.map(u=>u.split(xo)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:c}},Io=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],No={partitions:Io};let Mo=No;const Do=t=>{const{partitions:e}=Mo;for(const n of e){const{regions:s,outputs:i}=n;for(const[o,a]of Object.entries(s))if(o===t)return{...i,...a}}for(const n of e){const{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(t))return{...i}}const r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},os={isVirtualHostableS3Bucket:is,parseArn:Po,partition:Do};tt.aws=os;function _o(t){const e={};if(t=t.replace(/^\?/,""),t)for(const r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}const rt=t=>{if(typeof t=="string")return rt(new URL(t));const{hostname:e,pathname:r,port:n,protocol:s,search:i}=t;let o;return i&&(o=_o(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}};function ko(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}function ae(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}const Dr=t=>De.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,as=t=>new Date(Date.now()+t),Oo=(t,e)=>Math.abs(as(e).getTime()-t)>=3e5,_r=(t,e)=>{const r=Date.parse(t);return Oo(r,e)?r-Date.now():e},Fe=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},$o=async t=>{const e=Fe("context",t.context),r=Fe("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],i=await Fe("signer",r.signer)(n),o=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}};class Lo{async sign(e,r,n){if(!X.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await $o(n),{config:i,signer:o}=s;let{signingRegion:a,signingName:c}=s;const u=n.context;if(u?.authSchemes?.length??!1){const[l,f]=u.authSchemes;l?.name==="sigv4a"&&f?.name==="sigv4"&&(a=f?.signingRegion??a,c=f?.signingName??c)}return await o.sign(e,{signingDate:as(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{const n=r.ServerTime??Dr(r.$response);if(n){const s=Fe("config",e.config),i=s.systemClockOffset;s.systemClockOffset=_r(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){const n=Dr(e);if(n){const s=Fe("config",r.config);s.systemClockOffset=_r(n,s.systemClockOffset)}}}const Uo=(t,e,r)=>{let n,s,i,o=!1;const a=async()=>{s||(s=t());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return async c=>((!i||c?.forceRefresh)&&(n=await a()),n)},Bo="X-Amz-Algorithm",zo="X-Amz-Credential",cs="X-Amz-Date",Fo="X-Amz-SignedHeaders",Ho="X-Amz-Expires",us="X-Amz-Signature",ls="X-Amz-Security-Token",ds="authorization",fs=cs.toLowerCase(),jo="date",qo=[ds,fs,jo],Vo=us.toLowerCase(),Yt="x-amz-content-sha256",Ko=ls.toLowerCase(),Wo={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Go=/^proxy-/,Qo=/^sec-/,pt="AWS4-HMAC-SHA256",Jo="AWS4-HMAC-SHA256-PAYLOAD",Yo="UNSIGNED-PAYLOAD",Xo=50,hs="aws4_request",Zo=3600*24*7,We={},yt=[],wt=(t,e,r)=>`${t}/${e}/${r}/${hs}`,ea=async(t,e,r,n,s)=>{const i=await kr(t,e.secretAccessKey,e.accessKeyId),o=`${r}:${n}:${s}:${Ce(i)}:${e.sessionToken}`;if(o in We)return We[o];for(yt.push(o);yt.length>Xo;)delete We[yt.shift()];let a=`AWS4${e.secretAccessKey}`;for(const c of[r,n,s,hs])a=await kr(t,a,c);return We[o]=a},kr=(t,e,r)=>{const n=new t(e);return n.update(qe(r)),n.digest()},Or=({headers:t},e,r)=>{const n={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in Wo||e?.has(i)||Go.test(i)||Qo.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[s].trim().replace(/\s+/g," "))}return n},ta=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",St=async({headers:t,body:e},r)=>{for(const n of Object.keys(t))if(n.toLowerCase()===Yt)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||ta(e)){const n=new r;return n.update(qe(e)),Ce(await n.digest())}return Yo};class ra{format(e){const r=[];for(const i of Object.keys(e)){const o=_e(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=_e(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(ar.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!na.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const l=new Uint8Array(17);return l[0]=9,l.set(Ai(e.value.replace(/\-/g,"")),1),l}}}var $r;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})($r||($r={}));const na=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class ar{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&Lr(r),new ar(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&Lr(e),parseInt(Ce(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function Lr(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const sa=(t,e)=>{t=t.toLowerCase();for(const r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},ia=(t,e={})=>{const{headers:r,query:n={}}=X.clone(t);for(const s of Object.keys(r)){const i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},Ur=t=>{t=X.clone(t);for(const e of Object.keys(t.headers))qo.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},oa=({query:t={}})=>{const e=[],r={};for(const n of Object.keys(t)){if(n.toLowerCase()===Vo)continue;const s=Re(n);e.push(s);const i=t[n];typeof i=="string"?r[s]=`${s}=${Re(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${Re(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},aa=t=>ca(t).toISOString().replace(/\.\d{3}Z$/,"Z"),ca=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class ua{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=he(n),this.credentialProvider=he(r)}createCanonicalRequest(e,r,n){const s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${oa(e)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){const i=new this.sha256;i.update(qe(n));const o=await i.digest();return`${s}
${e}
${r}
${Ce(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const r=[];for(const i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return Re(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const r=aa(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class Br extends ua{headerFormatter=new ra;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){super({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o})}async presign(e,r={}){const{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);const f=u??await this.regionProvider(),{longDate:h,shortDate:g}=this.formatDate(n);if(s>Zo)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const m=wt(g,f,d??this.service),y=ia(Ur(e),{unhoistableHeaders:o,hoistableHeaders:c});l.sessionToken&&(y.query[ls]=l.sessionToken),y.query[Bo]=pt,y.query[zo]=`${l.accessKeyId}/${m}`,y.query[cs]=h,y.query[Ho]=s.toString(10);const p=Or(y,i,a);return y.query[Fo]=this.getCanonicalHeaderList(p),y.query[us]=await this.getSignature(h,m,this.getSigningKey(l,f,g,d),this.createCanonicalRequest(y,p,await St(e,this.sha256))),y}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:o}){const a=i??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(n),d=wt(c,a,o??this.service),l=await St({headers:{},body:r},this.sha256),f=new this.sha256;f.update(e);const h=Ce(await f.digest()),g=[Jo,u,d,s,h,l].join(`
`);return this.signString(g,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(i,o,a,s));return c.update(qe(e)),Ce(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const c=i??await this.regionProvider(),u=Ur(e),{longDate:d,shortDate:l}=this.formatDate(r),f=wt(l,c,o??this.service);u.headers[fs]=d,a.sessionToken&&(u.headers[Ko]=a.sessionToken);const h=await St(u,this.sha256);!sa(Yt,u.headers)&&this.applyChecksum&&(u.headers[Yt]=h);const g=Or(u,s,n),m=await this.getSignature(d,f,this.getSigningKey(a,c,l,o),this.createCanonicalRequest(u,g,h));return u.headers[ds]=`${pt} Credential=${a.accessKeyId}/${f}, SignedHeaders=${this.getCanonicalHeaderList(g)}, Signature=${m}`,u}async getSignature(e,r,n,s){const i=await this.createStringToSign(e,r,s,pt),o=new this.sha256(await n);return o.update(qe(i)),Ce(await o.digest())}getSigningKey(e,r,n,s){return ea(this.sha256,e,n,r,s||this.service)}}const la=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==n&&(r=!0),e=u;const d=da(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),l=fa(t,d);r&&!l.attributed?(n=async f=>l(f).then(h=>ko(h,"CREDENTIALS_CODE","e")),n.memoized=l.memoized,n.configBound=l.configBound,n.attributed=!0):n=l},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let a;return t.signer?a=Be(t.signer):t.regionInfoProvider?a=()=>Be(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,d])=>{const{signingRegion:l,signingService:f}=u;t.signingRegion=t.signingRegion||l||d,t.signingName=t.signingName||f||t.serviceId;const h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},g=t.signerConstructor||Br;return new g(h)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Be(t.region)(),properties:{}},u);const d=u.signingRegion,l=u.signingName;t.signingRegion=t.signingRegion||d,t.signingName=t.signingName||l||t.serviceId;const f={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},h=t.signerConstructor||Br;return new h(f)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:a})};function da(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=ro(e,to,Gn):r?n=Be(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function fa(t,e){if(e.configBound)return e;const r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}const zr=typeof TextEncoder=="function"?new TextEncoder:null,ha=t=>{if(typeof t=="string"){if(zr)return zr.encode(t).byteLength;let e=t.length;for(let r=e-1;r>=0;r--){const n=t.charCodeAt(r);n>127&&n<=2047?e++:n>2047&&n<=65535&&(e+=2),n>=56320&&n<=57343&&r--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},Ee=(t,e)=>{const r=[];if(t&&r.push(t),e)for(const n of e)r.push(n);return r},me=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,nt=()=>{let t=[],e=[],r=!1;const n=new Set,s=l=>l.sort((f,h)=>Fr[h.step]-Fr[f.step]||Hr[h.priority||"normal"]-Hr[f.priority||"normal"]),i=l=>{let f=!1;const h=g=>{const m=Ee(g.name,g.aliases);if(m.includes(l)){f=!0;for(const y of m)n.delete(y);return!1}return!0};return t=t.filter(h),e=e.filter(h),f},o=l=>{let f=!1;const h=g=>{if(g.middleware===l){f=!0;for(const m of Ee(g.name,g.aliases))n.delete(m);return!1}return!0};return t=t.filter(h),e=e.filter(h),f},a=l=>(t.forEach(f=>{l.add(f.middleware,{...f})}),e.forEach(f=>{l.addRelativeTo(f.middleware,{...f})}),l.identifyOnResolve?.(d.identifyOnResolve()),l),c=l=>{const f=[];return l.before.forEach(h=>{h.before.length===0&&h.after.length===0?f.push(h):f.push(...c(h))}),f.push(l),l.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?f.push(h):f.push(...c(h))}),f},u=(l=!1)=>{const f=[],h=[],g={};return t.forEach(y=>{const p={...y,before:[],after:[]};for(const w of Ee(p.name,p.aliases))g[w]=p;f.push(p)}),e.forEach(y=>{const p={...y,before:[],after:[]};for(const w of Ee(p.name,p.aliases))g[w]=p;h.push(p)}),h.forEach(y=>{if(y.toMiddleware){const p=g[y.toMiddleware];if(p===void 0){if(l)return;throw new Error(`${y.toMiddleware} is not found when adding ${me(y.name,y.aliases)} middleware ${y.relation} ${y.toMiddleware}`)}y.relation==="after"&&p.after.push(y),y.relation==="before"&&p.before.push(y)}}),s(f).map(c).reduce((y,p)=>(y.push(...p),y),[])},d={add:(l,f={})=>{const{name:h,override:g,aliases:m}=f,y={step:"initialize",priority:"normal",middleware:l,...f},p=Ee(h,m);if(p.length>0){if(p.some(w=>n.has(w))){if(!g)throw new Error(`Duplicate middleware name '${me(h,m)}'`);for(const w of p){const E=t.findIndex(_=>_.name===w||_.aliases?.some(b=>b===w));if(E===-1)continue;const S=t[E];if(S.step!==y.step||y.priority!==S.priority)throw new Error(`"${me(S.name,S.aliases)}" middleware with ${S.priority} priority in ${S.step} step cannot be overridden by "${me(h,m)}" middleware with ${y.priority} priority in ${y.step} step.`);t.splice(E,1)}}for(const w of p)n.add(w)}t.push(y)},addRelativeTo:(l,f)=>{const{name:h,override:g,aliases:m}=f,y={middleware:l,...f},p=Ee(h,m);if(p.length>0){if(p.some(w=>n.has(w))){if(!g)throw new Error(`Duplicate middleware name '${me(h,m)}'`);for(const w of p){const E=e.findIndex(_=>_.name===w||_.aliases?.some(b=>b===w));if(E===-1)continue;const S=e[E];if(S.toMiddleware!==y.toMiddleware||S.relation!==y.relation)throw new Error(`"${me(S.name,S.aliases)}" middleware ${S.relation} "${S.toMiddleware}" middleware cannot be overridden by "${me(h,m)}" middleware ${y.relation} "${y.toMiddleware}" middleware.`);e.splice(E,1)}}for(const w of p)n.add(w)}e.push(y)},clone:()=>a(nt()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?i(l):o(l),removeByTag:l=>{let f=!1;const h=g=>{const{tags:m,name:y,aliases:p}=g;if(m&&m.includes(l)){const w=Ee(y,p);for(const E of w)n.delete(E);return f=!0,!1}return!0};return t=t.filter(h),e=e.filter(h),f},concat:l=>{const f=a(nt());return f.use(l),f.identifyOnResolve(r||f.identifyOnResolve()||(l.identifyOnResolve?.()??!1)),f},applyToStack:a,identify:()=>u(!0).map(l=>{const f=l.step??l.relation+" "+l.toMiddleware;return me(l.name,l.aliases)+" - "+f}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,f)=>{for(const h of u().map(g=>g.middleware).reverse())l=h(l,f);return r&&console.log(d.identify()),l}};return d},Fr={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Hr={high:3,normal:2,low:1};class ga{config;middlewareStack=nt();initConfig;handlers;constructor(e){this.config=e;const{protocol:r,protocolSettings:n}=e;n&&typeof r=="function"&&(e.protocol=new r(n))}send(e,r,n){const s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0;let a;if(o){this.handlers||(this.handlers=new WeakMap);const c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}const Et="***SensitiveInformation***";function Xt(t,e){if(e==null)return e;const r=U.of(t);if(r.getMergedTraits().sensitive)return Et;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Et}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Et}else if(r.isStructSchema()&&typeof e=="object"){const n=e,s={};for(const[i,o]of r.structIterator())n[i]!=null&&(s[i]=Xt(o,n[i]));return s}return e}class gs{middlewareStack=nt();schema;static classBuilder(){return new ma}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:d,CommandCtor:l}){for(const y of s.bind(this)(l,e,r,n))this.middlewareStack.use(y);const f=e.concat(this.middlewareStack),{logger:h}=r,g={logger:h,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Qt]:{commandInstance:this,...u},...d},{requestHandler:m}=r;return f.resolve(y=>m.handle(y.request,n||{}),g)}}class ma{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let r;return r=class extends gs{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.input=n??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,s,i){const o=e._operationSchema,a=o?.[4]??o?.input,c=o?.[5]??o?.output;return this.resolveMiddlewareWithContext(n,s,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(o?Xt.bind(null,a):u=>u),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(o?Xt.bind(null,c):u=>u),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}}class Ne extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const r=e;return Ne.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const r=e;return this===Ne?Ne.isInstance(e):Ne.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}}const jr=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});const r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},pa=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},ya=t=>{const e=[];for(const r in Ze){const n=Ze[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},wa=t=>{const e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},Sa=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),Ea=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},ba=t=>Object.assign(ya(t),Sa(t)),Ta=t=>Object.assign(wa(t),Ea(t)),ms=t=>{const e="#text";for(const r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=ms(t[r]));return t};class ps{trace(){}debug(){}info(){}warn(){}error(){}}class Ra{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){const n=r.getMemberSchemas(),s=Object.values(n).find(i=>!!i.getMergedTraits().httpPayload);if(s){const i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(o=>{const{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:d,httpPrefixHeaders:l}=o.getMergedTraits();return!a&&!c&&!u&&!d&&l===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,i,o){let a=r,c=e;e.includes("#")&&([a,c]=e.split("#"));const u={$metadata:i,$fault:n.statusCode<500?"client":"server"},d=L.for(a);try{return{errorSchema:o?.(d,c)??d.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";const f=L.for("smithy.ts.sdk.synthetic."+a),h=f.getBaseException();if(h){const g=f.getErrorCtor(h)??Error;throw this.decorateServiceException(Object.assign(new g({name:c}),u),s)}throw this.decorateServiceException(Object.assign(new Error(c),u),s)}}decorateServiceException(e,r={}){if(this.queryCompat){const n=e.Message??r.Message,s=jr(e,r);n&&(s.message=n),s.Error={...s.Error,Type:s.Error.Type,Code:s.Error.Code,Message:s.Error.message??s.Error.Message??n};const i=s.$metadata.requestId;return i&&(s.RequestId=i),s}return jr(e,r)}setQueryCompatError(e,r){const n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){const[s,i]=n.split(";"),o=Object.entries(e),a={Code:s,Type:i};Object.assign(e,a);for(const[c,u]of o)a[c==="message"?"Message":c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(s=>U.of(s).getMergedTraits().awsQueryError?.[0]===r)}}}class ys{serdeContext;setSerdeContext(e){this.serdeContext=e}}function*Ca(t,e){if(t.isUnitSchema())return;const r=t.getSchema();for(let n=0;n<r[4].length;++n){const s=r[4][n],i=r[5][n],o=new U([i,0],s);!(s in e)&&!o.isIdempotencyToken()||(yield[s,o])}}let bt;function Aa(t){bt||(bt=new DOMParser);const e=bt.parseFromString(t,"application/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("DOMParser XML parsing error.");const r=n=>{if(n.nodeType===Node.TEXT_NODE&&n.textContent?.trim())return n.textContent;if(n.nodeType===Node.ELEMENT_NODE){const s=n;if(s.attributes.length===0&&s.childNodes.length===0)return"";const i={},o=Array.from(s.attributes);for(const c of o)i[`${c.name}`]=c.value;const a=Array.from(s.childNodes);for(const c of a){const u=r(c);if(u!=null){const d=c.nodeName;if(a.length===1&&o.length===0&&d==="#text")return u;i[d]?Array.isArray(i[d])?i[d].push(u):i[d]=[i[d],u]:i[d]=u}else if(a.length===1&&o.length===0)return s.textContent}return i}return null};return{[e.documentElement.nodeName]:r(e.documentElement)}}class va extends ys{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new Qi(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,r,n){const s=U.of(e),i=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(i).find(u=>!!u.getMemberTraits().eventPayload)){const u={},d=Object.keys(i)[0];return i[d].isBlobSchema()?u[d]=r:u[d]=this.read(i[d],r),u}const a=(this.serdeContext?.utf8Encoder??it)(r),c=this.parseXml(a);return this.readSchema(e,n?c[n]:c)}readSchema(e,r){const n=U.of(e);if(n.isUnitSchema())return;const s=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){const i=!!s.sparse,o=!!s.xmlFlattened;if(n.isListSchema()){const c=n.getValueSchema(),u=[],d=c.getMergedTraits().xmlName??"member",l=o?r:(r[0]??r)[d],f=Array.isArray(l)?l:[l];for(const h of f)(h!=null||i)&&u.push(this.readSchema(c,h));return u}const a={};if(n.isMapSchema()){const c=n.getKeySchema(),u=n.getValueSchema();let d;o?d=Array.isArray(r)?r:[r]:d=Array.isArray(r.entry)?r.entry:[r.entry];const l=c.getMergedTraits().xmlName??"key",f=u.getMergedTraits().xmlName??"value";for(const h of d){const g=h[l],m=h[f];(m!=null||i)&&(a[g]=this.readSchema(u,m))}return a}if(n.isStructSchema()){for(const[c,u]of n.structIterator()){const d=u.getMergedTraits(),l=d.httpPayload?d.xmlName??u.getName():u.getMemberTraits().xmlName??c;r[l]!=null&&(a[c]=this.readSchema(u,r[l]))}return a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(e){if(e.length){let r;try{r=Aa(e)}catch(o){throw o&&typeof o=="object"&&Object.defineProperty(o,"$responseBodyText",{value:e}),o}const n="#text",s=Object.keys(r)[0],i=r[s];return i[n]&&(i[s]=i[n],delete i[n]),ms(i)}return{}}}class xa extends ys{settings;buffer;constructor(e){super(),this.settings=e}write(e,r,n=""){this.buffer===void 0&&(this.buffer="");const s=U.of(e);if(n&&!n.endsWith(".")&&(n+="."),s.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??tr)(r)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):s.isIdempotencyToken()&&(this.writeKey(n),this.writeValue(jn()));else if(s.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(s.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof ot?r.string:String(r)));else if(s.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),Wn(s,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue(ki(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(s.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${s.getName(!0)}`);if(s.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{const i=s.getValueSchema(),o=this.settings.flattenLists||s.getMergedTraits().xmlFlattened;let a=1;for(const c of r){if(c==null)continue;const u=this.getKey("member",i.getMergedTraits().xmlName),d=o?`${n}${a}`:`${n}${u}.${a}`;this.write(i,c,d),++a}}}else if(s.isMapSchema()){if(r&&typeof r=="object"){const i=s.getKeySchema(),o=s.getValueSchema(),a=s.getMergedTraits().xmlFlattened;let c=1;for(const[u,d]of Object.entries(r)){if(d==null)continue;const l=this.getKey("key",i.getMergedTraits().xmlName),f=a?`${n}${c}.${l}`:`${n}entry.${c}.${l}`,h=this.getKey("value",o.getMergedTraits().xmlName),g=a?`${n}${c}.${h}`:`${n}entry.${c}.${h}`;this.write(i,u,f),this.write(o,d,g),++c}}}else if(s.isStructSchema()){if(r&&typeof r=="object")for(const[i,o]of Ca(s,r)){if(r[i]==null&&!o.isIdempotencyToken())continue;const a=this.getKey(i,o.getMergedTraits().xmlName),c=`${n}${a}`;this.write(o,r[i],c)}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");const e=this.buffer;return delete this.buffer,e}getKey(e,r){const n=r??e;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${xr(e)}=`}writeValue(e){this.buffer+=xr(e)}}class Pa extends Gi{options;serializer;deserializer;mixin=new Ra;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;const r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new xa(r),this.deserializer=new va(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,r,n){const s=await super.serializeRequest(e,r,n);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(Je(e.input)==="unit"||!s.body)&&(s.body="");const i=e.name.split("#")[1]??e.name;return s.body=`Action=${i}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(e,r,n){const s=this.deserializer,i=U.of(e.output),o={};if(n.statusCode>=300){const l=await et(n.body,r);l.byteLength>0&&Object.assign(o,await s.read(15,l)),await this.handleError(e,r,n,o,this.deserializeMetadata(n))}for(const l in n.headers){const f=n.headers[l];delete n.headers[l],n.headers[l.toLowerCase()]=f}const a=e.name.split("#")[1]??e.name,c=i.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,u=await et(n.body,r);return u.byteLength>0&&Object.assign(o,await s.read(i,u,c)),{$metadata:this.deserializeMetadata(n),...o}}useNestedResult(){return!0}async handleError(e,r,n,s,i){const o=this.loadQueryErrorCode(n,s)??"Unknown",a=this.loadQueryError(s),c=this.loadQueryErrorMessage(s);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};const{errorSchema:u,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,a,i,this.mixin.findQueryCompatibleError),l=U.of(u),f=L.for(u[1]).getErrorCtor(u)??Error,h=new f(c),g={Type:a.Error.Type,Code:a.Error.Code,Error:a.Error};for(const[m,y]of l.structIterator()){const p=y.getMergedTraits().xmlName??m,w=a[p]??s[p];g[m]=this.deserializer.readSchema(y,w)}throw this.mixin.decorateServiceException(Object.assign(h,d,{$fault:l.getMergedTraits().error,message:c},g),s)}loadQueryErrorCode(e,r){const n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(e.statusCode==404)return"NotFound"}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){const r=this.loadQueryError(e);return r?.message??r?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}const Ia=/\d{12}\.ddb/;async function Na(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&ae(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?ae(t,"RETRY_MODE_ADAPTIVE","F"):ae(t,"RETRY_MODE_STANDARD","E"):ae(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const i=t.endpointV2;switch(String(i?.url?.hostname).match(Ia)&&ae(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":ae(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":ae(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":ae(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const i=s;i.accountId&&ae(t,"RESOLVED_ACCOUNT_ID","T");for(const[o,a]of Object.entries(i.$source??{}))ae(t,o,a)}}const qr="user-agent",Tt="x-amz-user-agent",Vr=" ",Rt="/",Ma=/[^!$%&'*+\-.^_`|~\w]/g,Da=/[^!$%&'*+\-.^_`|~\w#]/g,Kr="-",_a=1024;function ka(t){let e="";for(const r in t){const n=t[r];if(e.length+n.length+1<=_a){e.length?e+=","+n:e+=n;continue}break}return e}const Oa=t=>(e,r)=>async n=>{const{request:s}=n;if(!X.isInstance(s))return e(n);const{headers:i}=s,o=r?.userAgent?.map(Ge)||[],a=(await t.defaultUserAgentProvider()).map(Ge);await Na(r,t,n);const c=r;a.push(`m/${ka(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);const u=t?.customUserAgent?.map(Ge)||[],d=await t.userAgentAppId();d&&a.push(Ge(["app",`${d}`]));const l=[].concat([...a,...o,...u]).join(Vr),f=[...a.filter(h=>h.startsWith("aws-sdk-")),...u].join(Vr);return t.runtime!=="browser"?(f&&(i[Tt]=i[Tt]?`${i[qr]} ${f}`:f),i[qr]=l):i[Tt]=l,e({...n,request:s})},Ge=t=>{const e=t[0].split(Rt).map(o=>o.replace(Ma,Kr)).join(Rt),r=t[1]?.replace(Da,Kr),n=e.indexOf(Rt),s=e.substring(0,n);let i=e.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},$a={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},La=t=>({applyToStack:e=>{e.add(Oa(t),$a)}}),Ua=!1,Ba=!1,Wr=new Set,za=(t,e=at)=>{if(!Wr.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else Wr.add(t)},ws=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Fa=t=>ws(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,Ha=t=>{const{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{const n=typeof e=="function"?await e():e,s=Fa(n);return za(s),s},useFipsEndpoint:async()=>{const n=typeof e=="string"?e:await e();return ws(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},Gr="content-length";function ja(t){return e=>async r=>{const n=r.request;if(X.isInstance(n)){const{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(Gr)===-1)try{const o=t(s);n.headers={...n.headers,[Gr]:String(o)}}catch{}}return e({...r,request:n})}}const qa={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Va=t=>({applyToStack:e=>{e.add(ja(t.bodyLengthChecker),qa)}}),Ka=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Ya(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Ja(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},Wa=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Ga=/(\d+\.){3}\d+/,Qa=/\.\./,Ja=t=>Wa.test(t)&&!Ga.test(t)&&!Qa.test(t),Ya=t=>{const[e,r,n,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},Xa=(t,e,r,n=!1)=>{const s=async()=>{let i;return n?i=r.clientContextParams?.[t]??r[t]??r[e]:i=r[t]??r[e],typeof i=="function"?i():i};return t==="credentialScope"||e==="CredentialScope"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.credentialScope??i?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.accountId??i?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;const i=await s();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){const{protocol:o,hostname:a,port:c,path:u}=i;return`${o}//${a}${c?":"+c:""}${u}`}}return i}:s},Ss=async t=>{},Es=t=>typeof t=="object"?"url"in t?rt(t.url):t:rt(t),Za=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await Ss(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(Es(o)),r.isCustomEndpoint=!0)}const s=await ec(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},ec=async(t,e,r)=>{const n={},s=e?.getEndpointParameterInstructions?.()||{};for(const[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":n[i]=o.value;break;case"contextParams":n[i]=t[o.name];break;case"clientContextParams":case"builtInParams":n[i]=await Xa(o.name,i,r,o.type!=="builtInParams")();break;case"operationContextParams":n[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Ka(n),n},tc=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&Ji(n,"ENDPOINT_OVERRIDE","N");const i=await Za(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;const o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;const c=Oe(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},rc={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:li.name},nc=(t,e)=>({applyToStack:r=>{r.addRelativeTo(tc({config:t,instructions:e}),rc)}}),sc=t=>{const e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,i=r!=null?async()=>Es(await he(r)()):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:he(n??!1),useFipsEndpoint:he(s??!1)});let c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=Ss(t.serviceId)),c),a};var ke;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(ke||(ke={}));const st=3,ic=ke.STANDARD,oc=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ac=["TimeoutError","RequestTimeout","RequestTimeoutException"],cc=[500,502,503,504],uc=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],lc=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],dc=t=>t?.$retryable!==void 0,fc=t=>t.$metadata?.clockSkewCorrected,hc=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},bs=t=>t.$metadata?.httpStatusCode===429||oc.includes(t.name)||t.$retryable?.throttling==!0,cr=(t,e=0)=>dc(t)||fc(t)||ac.includes(t.name)||uc.includes(t?.code||"")||lc.includes(t?.code||"")||cc.includes(t.$metadata?.httpStatusCode||0)||hc(t)||t.cause!==void 0&&e<=10&&cr(t.cause,e+1),gc=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!cr(t)}return!1};class ur{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>ur.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),bs(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}}const Zt=100,Ts=20*1e3,mc=500,Qr=500,pc=5,yc=10,wc=1,Sc="amz-sdk-invocation-id",Ec="amz-sdk-request",bc=()=>{let t=Zt;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Ts,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},Jr=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(Ts,t),getRetryCost:()=>r});class Rs{maxAttempts;mode=ke.STANDARD;capacity=Qr;retryBackoffStrategy=bc();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return Jr({retryDelay:Zt,retryCount:0})}async refreshRetryTokenForRetry(e,r){const n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){const s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?mc:Zt);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,Jr({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(Qr,this.capacity+(e.getRetryCost()??wc))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${st}`),st}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?yc:pc}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Tc{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=ke.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;const{rateLimiter:n}=r??{};this.rateLimiter=n??new ur,this.standardRetryStrategy=new Rs(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const Rc=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Cc=t=>{const{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=he(n??st);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await he(r)()===ke.ADAPTIVE?new Tc(s):new Rs(s))})},Ac=t=>t?.body instanceof ReadableStream,vc=t=>(e,r)=>async n=>{let s=await t.retryStrategy();const i=await t.maxAttempts();if(xc(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0;const{request:d}=n,l=X.isInstance(d);for(l&&(d.headers[Sc]=jn());;)try{l&&(d.headers[Ec]=`attempt=${c+1}; max=${i}`);const{response:f,output:h}=await e(n);return s.recordSuccess(o),h.$metadata.attempts=c+1,h.$metadata.totalRetryDelay=u,{response:f,output:h}}catch(f){const h=Pc(f);if(a=Rc(f),l&&Ac(d))throw(r.logger instanceof ps?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();const g=o.getRetryDelay();u+=g,await new Promise(m=>setTimeout(m,g))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},xc=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",Pc=t=>{const e={error:t,errorType:Ic(t)},r=Dc(t.$response);return r&&(e.retryAfterHint=r),e},Ic=t=>bs(t)?"THROTTLING":cr(t)?"TRANSIENT":gc(t)?"SERVER_ERROR":"CLIENT_ERROR",Nc={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Mc=t=>({applyToStack:e=>{e.add(vc(t),Nc)}}),Dc=t=>{if(!De.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},_c=async(t,e,r)=>({operation:Oe(e).operation,region:await he(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function kc(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Yr(t){return{schemeId:"smithy.api#noAuth"}}const Oc=t=>{const e=[];switch(t.operation){case"AssumeRoleWithSAML":{e.push(Yr());break}case"AssumeRoleWithWebIdentity":{e.push(Yr());break}default:e.push(kc(t))}return e},$c=t=>Object.assign(t,{stsClientCtor:Os}),Lc=t=>{const e=$c(t),r=la(e);return Object.assign(r,{authSchemePreference:he(t.authSchemePreference??[])})},Uc=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Bc={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},zc="3.954.0",Fc={version:zc},Hc=t=>new TextEncoder().encode(t);var jc=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:Hc;function Ke(t){return t instanceof Uint8Array?t:typeof t=="string"?jc(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function er(t){return typeof t=="string"?t.length===0:t.byteLength===0}var Cs={name:"SHA-256"},Xr={name:"HMAC",hash:Cs},qc=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const Vc={};function Ye(){return typeof window<"u"?window:typeof self<"u"?self:Vc}var Kc=(function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!er(e)){var r=Ke(e),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(r){return Ye().crypto.subtle.sign(Xr,r,e.toHash).then(function(n){return new Uint8Array(n)})}):er(this.toHash)?Promise.resolve(qc):Promise.resolve().then(function(){return Ye().crypto.subtle.digest(Cs,e.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,n){Ye().crypto.subtle.importKey("raw",Ke(e.secret),Xr,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))},t})();function Wc(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(l){o(l)}}function c(d){try{u(n.throw(d))}catch(l){o(l)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function Gc(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var te=64,Qc=32,Jc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Xc=Math.pow(2,53)-1,Xe=(function(){function t(){this.state=Int32Array.from(Yc),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,n=e.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>Xc)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[r++],n--,this.bufferLength===te&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(r.setUint8(this.bufferLength++,128),n%te>=te-8){for(var s=this.bufferLength;s<te;s++)r.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<te-8;s++)r.setUint8(s,0);r.setUint32(te-8,Math.floor(e/4294967296),!0),r.setUint32(te-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(Qc),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,r=e.buffer,n=e.state,s=n[0],i=n[1],o=n[2],a=n[3],c=n[4],u=n[5],d=n[6],l=n[7],f=0;f<te;f++){if(f<16)this.temp[f]=(r[f*4]&255)<<24|(r[f*4+1]&255)<<16|(r[f*4+2]&255)<<8|r[f*4+3]&255;else{var h=this.temp[f-2],g=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10;h=this.temp[f-15];var m=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[f]=(g+this.temp[f-7]|0)+(m+this.temp[f-16]|0)}var y=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&d)|0)+(l+(Jc[f]+this.temp[f]|0)|0)|0,p=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&o^i&o)|0;l=d,d=u,u=c,c=a+y|0,a=o,o=i,i=s,s=y+p|0}n[0]+=s,n[1]+=i,n[2]+=o,n[3]+=a,n[4]+=c,n[5]+=u,n[6]+=d,n[7]+=l},t})(),Zc=(function(){function t(e){this.secret=e,this.hash=new Xe,this.reset()}return t.prototype.update=function(e){if(!(er(e)||this.error))try{this.hash.update(Ke(e))}catch(r){this.error=r}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return Wc(this,void 0,void 0,function(){return Gc(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new Xe,this.secret){this.outer=new Xe;var e=eu(this.secret),r=new Uint8Array(te);r.set(e);for(var n=0;n<te;n++)e[n]^=54,r[n]^=92;this.hash.update(e),this.outer.update(r);for(var n=0;n<e.byteLength;n++)e[n]=0}},t})();function eu(t){var e=Ke(t);if(e.byteLength>te){var r=new Xe;r.update(e),e=r.digest()}var n=new Uint8Array(te);return n.set(e),n}var tu=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function ru(t){if(nu(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return su(e)}return!1}function nu(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function su(t){return t&&tu.every(function(e){return typeof t[e]=="function"})}var iu=(function(){function t(e){ru(Ye())?this.hash=new Kc(e):this.hash=new Zc(e)}return t.prototype.update=function(e,r){this.hash.update(Ke(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})();const ou=({serviceId:t,clientVersion:e})=>async r=>{const n=typeof window<"u"?window.navigator:void 0,s=n?.userAgent??"",i=n?.userAgentData?.platform??Zr.os(s)??"other",o=void 0,a=n?.userAgentData?.brands??[],c=a[a.length-1],u=c?.brand??Zr.browser(s)??"unknown",d=c?.version??"unknown",l=[["aws-sdk-js",e],["ua","2.1"],[`os/${i}`,o],["lang/js"],["md/browser",`${u}_${d}`]];t&&l.push([`api/${t}`,e]);const f=await r?.userAgentAppId?.();return f&&l.push([`app/${f}`]),l},Zr={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}},au=t=>()=>Promise.reject(t),cu=["in-region","cross-region","mobile","standard","legacy"],uu=({defaultsMode:t}={})=>Uo(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(lu()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${cu.join(", ")}, got ${e}`)}}),lu=()=>{const t=window?.navigator;if(t?.connection){const{effectiveType:e,rtt:r,downlink:n}=t?.connection;if(typeof e=="string"&&e!=="4g"||Number(r)>100||Number(n)<10)return!0}return t?.userAgentData?.mobile||typeof t?.maxTouchPoints=="number"&&t?.maxTouchPoints>1},As="required",N="type",k="fn",O="argv",Se="ref",en=!1,Ct=!0,ye="booleanEquals",F="stringEquals",vs="sigv4",xs="sts",Ps="us-east-1",$="endpoint",tn="https://sts.{Region}.{PartitionResult#dnsSuffix}",ce="tree",Pe="error",lr="getAttr",rn={[As]:!1,[N]:"string"},At={[As]:!0,default:!1,[N]:"boolean"},Is={[Se]:"Endpoint"},nn={[k]:"isSet",[O]:[{[Se]:"Region"}]},H={[Se]:"Region"},sn={[k]:"aws.partition",[O]:[H],assign:"PartitionResult"},Ns={[Se]:"UseFIPS"},Ms={[Se]:"UseDualStack"},V={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:vs,signingName:xs,signingRegion:Ps}]},headers:{}},Y={},on={conditions:[{[k]:F,[O]:[H,"aws-global"]}],[$]:V,[N]:$},Ds={[k]:ye,[O]:[Ns,!0]},_s={[k]:ye,[O]:[Ms,!0]},an={[k]:lr,[O]:[{[Se]:"PartitionResult"},"supportsFIPS"]},ks={[Se]:"PartitionResult"},cn={[k]:ye,[O]:[!0,{[k]:lr,[O]:[ks,"supportsDualStack"]}]},un=[{[k]:"isSet",[O]:[Is]}],ln=[Ds],dn=[_s],du={parameters:{Region:rn,UseDualStack:At,UseFIPS:At,Endpoint:rn,UseGlobalEndpoint:At},rules:[{conditions:[{[k]:ye,[O]:[{[Se]:"UseGlobalEndpoint"},Ct]},{[k]:"not",[O]:un},nn,sn,{[k]:ye,[O]:[Ns,en]},{[k]:ye,[O]:[Ms,en]}],rules:[{conditions:[{[k]:F,[O]:[H,"ap-northeast-1"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"ap-south-1"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"ap-southeast-1"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"ap-southeast-2"]}],endpoint:V,[N]:$},on,{conditions:[{[k]:F,[O]:[H,"ca-central-1"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"eu-central-1"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"eu-north-1"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"eu-west-1"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"eu-west-2"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"eu-west-3"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"sa-east-1"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,Ps]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"us-east-2"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"us-west-1"]}],endpoint:V,[N]:$},{conditions:[{[k]:F,[O]:[H,"us-west-2"]}],endpoint:V,[N]:$},{endpoint:{url:tn,properties:{authSchemes:[{name:vs,signingName:xs,signingRegion:"{Region}"}]},headers:Y},[N]:$}],[N]:ce},{conditions:un,rules:[{conditions:ln,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[N]:Pe},{conditions:dn,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[N]:Pe},{endpoint:{url:Is,properties:Y,headers:Y},[N]:$}],[N]:ce},{conditions:[nn],rules:[{conditions:[sn],rules:[{conditions:[Ds,_s],rules:[{conditions:[{[k]:ye,[O]:[Ct,an]},cn],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Y,headers:Y},[N]:$}],[N]:ce},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[N]:Pe}],[N]:ce},{conditions:ln,rules:[{conditions:[{[k]:ye,[O]:[an,Ct]}],rules:[{conditions:[{[k]:F,[O]:[{[k]:lr,[O]:[ks,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Y,headers:Y},[N]:$},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Y,headers:Y},[N]:$}],[N]:ce},{error:"FIPS is enabled but this partition does not support FIPS",[N]:Pe}],[N]:ce},{conditions:dn,rules:[{conditions:[cn],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Y,headers:Y},[N]:$}],[N]:ce},{error:"DualStack is enabled but this partition does not support DualStack",[N]:Pe}],[N]:ce},on,{endpoint:{url:tn,properties:Y,headers:Y},[N]:$}],[N]:ce}],[N]:ce},{error:"Invalid Configuration: Missing Region",[N]:Pe}]},fu=du,hu=new oo({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),gu=(t,e={})=>hu.get(t,()=>vo(fu,{endpointParams:t,logger:e.logger}));tt.aws=os;const mu=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??je,base64Encoder:t?.base64Encoder??tr,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??gu,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Oc,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Lo},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Xi}],logger:t?.logger??new ps,protocol:t?.protocol??Pa,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??rt,utf8Decoder:t?.utf8Decoder??_e,utf8Encoder:t?.utf8Encoder??it}),pu=t=>{const e=uu(t),r=()=>e().then(pa),n=mu(t);return{...n,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??ha,credentialDefaultProvider:t?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??ou({serviceId:n.serviceId,clientVersion:Fc.version}),maxAttempts:t?.maxAttempts??st,region:t?.region??au("Region is missing"),requestHandler:rr.create(t?.requestHandler??r),retryMode:t?.retryMode??(async()=>(await r()).retryMode||ic),sha256:t?.sha256??iu,streamCollector:t?.streamCollector??bi,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(Ua)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(Ba))}},yu=t=>({setRegion(e){t.region=e},region(){return t.region}}),wu=t=>({region:t.region()}),Su=t=>{const e=t.httpAuthSchemes;let r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){const i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},Eu=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),bu=(t,e)=>{const r=Object.assign(yu(t),ba(t),Ws(t),Su(t));return e.forEach(n=>n.configure(r)),Object.assign(t,wu(r),Ta(r),Gs(r),Eu(r))};class Os extends ga{config;constructor(...[e]){const r=pu(e||{});super(r),this.initConfig=r;const n=Uc(r),s=io(n),i=Cc(s),o=Ha(i),a=o,c=sc(a),u=Lc(c),d=bu(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(Ni(this.config)),this.middlewareStack.use(La(this.config)),this.middlewareStack.use(Mc(this.config)),this.middlewareStack.use(Va(this.config)),this.middlewareStack.use(Xs(this.config)),this.middlewareStack.use(ti(this.config)),this.middlewareStack.use(si(this.config)),this.middlewareStack.use(ui(this.config,{httpAuthSchemeParametersProvider:_c,identityProviderConfigProvider:async l=>new Yi({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(mi(this.config))}destroy(){super.destroy()}}class G extends Ne{constructor(e){super(e),Object.setPrototypeOf(this,G.prototype)}}class dr extends G{name="ExpiredTokenException";$fault="client";constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,dr.prototype)}}class fr extends G{name="MalformedPolicyDocumentException";$fault="client";constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,fr.prototype)}}class hr extends G{name="PackedPolicyTooLargeException";$fault="client";constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),Object.setPrototypeOf(this,hr.prototype)}}class gr extends G{name="RegionDisabledException";$fault="client";constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,gr.prototype)}}class mr extends G{name="IDPRejectedClaimException";$fault="client";constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),Object.setPrototypeOf(this,mr.prototype)}}class pr extends G{name="InvalidIdentityTokenException";$fault="client";constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,pr.prototype)}}class yr extends G{name="IDPCommunicationErrorException";$fault="client";constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,yr.prototype)}}class wr extends G{name="InvalidAuthorizationMessageException";$fault="client";constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),Object.setPrototypeOf(this,wr.prototype)}}class Sr extends G{name="ExpiredTradeInTokenException";$fault="client";constructor(e){super({name:"ExpiredTradeInTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,Sr.prototype)}}class Er extends G{name="JWTPayloadSizeExceededException";$fault="client";constructor(e){super({name:"JWTPayloadSizeExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,Er.prototype)}}class br extends G{name="OutboundWebIdentityFederationDisabledException";$fault="client";constructor(e){super({name:"OutboundWebIdentityFederationDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,br.prototype)}}class Tr extends G{name="SessionDurationEscalationException";$fault="client";constructor(e){super({name:"SessionDurationEscalationException",$fault:"client",...e}),Object.setPrototypeOf(this,Tr.prototype)}}const Tu="Arn",Ru="AccessKeyId",Cu="AssumeRole",Au="AssumedRoleId",vu="AssumeRoleRequest",xu="AssumeRoleResponse",$s="AssumedRoleUser",Ls="Credentials",Pu="ContextAssertion",Iu="DurationSeconds",Nu="Expiration",Mu="ExternalId",Du="ExpiredTokenException",_u="ExpiredTradeInTokenException",ku="InvalidAuthorizationMessageException",Ou="IDPCommunicationErrorException",$u="IDPRejectedClaimException",Lu="InvalidIdentityTokenException",Uu="JWTPayloadSizeExceededException",Bu="Key",zu="MalformedPolicyDocumentException",Fu="OutboundWebIdentityFederationDisabledException",Hu="Policy",ju="PolicyArns",qu="ProviderArn",Vu="ProvidedContexts",Ku="ProvidedContextsListType",Wu="ProvidedContext",Gu="PolicyDescriptorType",Qu="PackedPolicySize",Ju="PackedPolicyTooLargeException",Yu="RoleArn",Xu="RegionDisabledException",Zu="RoleSessionName",el="SecretAccessKey",tl="SessionDurationEscalationException",Us="SourceIdentity",rl="SerialNumber",nl="SessionToken",sl="Tags",il="TokenCode",ol="TransitiveTagKeys",al="Tag",cl="Value",ul="arn",ll="accessKeySecretType",re="awsQueryError",ne="client",se="error",ie="httpError",oe="message",dl="policyDescriptorListType",Bs="smithy.ts.sdk.synthetic.com.amazonaws.sts",fl="tagListType",D="com.amazonaws.sts";var hl=[0,D,ll,8,0],gl=[3,D,$s,0,[Au,Tu],[0,0]],ml=[3,D,vu,0,[Yu,Zu,ju,Hu,Iu,sl,ol,Mu,rl,il,Us,Vu],[0,0,()=>kl,0,1,()=>$l,64,0,0,0,0,()=>Ol]],pl=[3,D,xu,0,[Ls,$s,Qu,Us],[[()=>yl,0],()=>gl,1,0]],yl=[3,D,Ls,0,[Ru,el,nl,Nu],[0,[()=>hl,0],0,4]],wl=[-3,D,Du,{[se]:ne,[ie]:400,[re]:["ExpiredTokenException",400]},[oe],[0]];L.for(D).registerError(wl,dr);var Sl=[-3,D,_u,{[se]:ne,[ie]:400,[re]:["ExpiredTradeInTokenException",400]},[oe],[0]];L.for(D).registerError(Sl,Sr);var El=[-3,D,Ou,{[se]:ne,[ie]:400,[re]:["IDPCommunicationError",400]},[oe],[0]];L.for(D).registerError(El,yr);var bl=[-3,D,$u,{[se]:ne,[ie]:403,[re]:["IDPRejectedClaim",403]},[oe],[0]];L.for(D).registerError(bl,mr);var Tl=[-3,D,ku,{[se]:ne,[ie]:400,[re]:["InvalidAuthorizationMessageException",400]},[oe],[0]];L.for(D).registerError(Tl,wr);var Rl=[-3,D,Lu,{[se]:ne,[ie]:400,[re]:["InvalidIdentityToken",400]},[oe],[0]];L.for(D).registerError(Rl,pr);var Cl=[-3,D,Uu,{[se]:ne,[ie]:400,[re]:["JWTPayloadSizeExceededException",400]},[oe],[0]];L.for(D).registerError(Cl,Er);var Al=[-3,D,zu,{[se]:ne,[ie]:400,[re]:["MalformedPolicyDocument",400]},[oe],[0]];L.for(D).registerError(Al,fr);var vl=[-3,D,Fu,{[se]:ne,[ie]:403,[re]:["OutboundWebIdentityFederationDisabledException",403]},[oe],[0]];L.for(D).registerError(vl,br);var xl=[-3,D,Ju,{[se]:ne,[ie]:400,[re]:["PackedPolicyTooLarge",400]},[oe],[0]];L.for(D).registerError(xl,hr);var Pl=[3,D,Gu,0,[ul],[0]],Il=[3,D,Wu,0,[qu,Pu],[0,0]],Nl=[-3,D,Xu,{[se]:ne,[ie]:403,[re]:["RegionDisabledException",403]},[oe],[0]];L.for(D).registerError(Nl,gr);var Ml=[-3,D,tl,{[se]:ne,[ie]:403,[re]:["SessionDurationEscalationException",403]},[oe],[0]];L.for(D).registerError(Ml,Tr);var Dl=[3,D,al,0,[Bu,cl],[0,0]],_l=[-3,Bs,"STSServiceException",0,[],[]];L.for(Bs).registerError(_l,G);var kl=[1,D,dl,0,()=>Pl],Ol=[1,D,Ku,0,()=>Il],$l=[1,D,fl,0,()=>Dl],Ll=[9,D,Cu,0,()=>ml,()=>pl];class Ul extends gs.classBuilder().ep(Bc).m(function(e,r,n,s){return[nc(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(Ll).build(){}var Ie={},vt,fn;function Bl(){return fn||(fn=1,vt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),vt}var xt={},pe={},hn;function Ae(){if(hn)return pe;hn=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return pe.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},pe.getSymbolTotalCodewords=function(n){return e[n]},pe.getBCHDigit=function(r){let n=0;for(;r!==0;)n++,r>>>=1;return n},pe.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');t=n},pe.isKanjiModeEnabled=function(){return typeof t<"u"},pe.toSJIS=function(n){return t(n)},pe}var Pt={},gn;function Rr(){return gn||(gn=1,(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,s){if(t.isValid(n))return n;try{return e(n)}catch{return s}}})(Pt)),Pt}var It,mn;function zl(){if(mn)return It;mn=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const r=Math.floor(e/8);return(this.buffer[r]>>>7-e%8&1)===1},put:function(e,r){for(let n=0;n<r;n++)this.putBit((e>>>r-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),e&&(this.buffer[r]|=128>>>this.length%8),this.length++}},It=t,It}var Nt,pn;function Fl(){if(pn)return Nt;pn=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,r,n,s){const i=e*this.size+r;this.data[i]=n,s&&(this.reservedBit[i]=!0)},t.prototype.get=function(e,r){return this.data[e*this.size+r]},t.prototype.xor=function(e,r,n){this.data[e*this.size+r]^=n},t.prototype.isReserved=function(e,r){return this.reservedBit[e*this.size+r]},Nt=t,Nt}var Mt={},yn;function Hl(){return yn||(yn=1,(function(t){const e=Ae().getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=e(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let c=1;c<s-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const s=[],i=t.getRowColCoords(n),o=i.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||s.push([i[a],i[c]]);return s}})(Mt)),Mt}var Dt={},wn;function jl(){if(wn)return Dt;wn=1;const t=Ae().getSymbolSize,e=7;return Dt.getPositions=function(n){const s=t(n);return[[0,0],[s-e,0],[0,s-e]]},Dt}var _t={},Sn;function ql(){return Sn||(Sn=1,(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,c=0,u=null,d=null;for(let l=0;l<i;l++){a=c=0,u=d=null;for(let f=0;f<i;f++){let h=s.get(l,f);h===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=h,a=1),h=s.get(f,l),h===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=h,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let c=0;c<i-1;c++){const u=s.get(a,c)+s.get(a,c+1)+s.get(a+1,c)+s.get(a+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,c=0;for(let u=0;u<i;u++){a=c=0;for(let d=0;d<i;d++)a=a<<1&2047|s.get(u,d),d>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|s.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function r(n,s,i){switch(n){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)i.isReserved(c,a)||i.xor(c,a,r(s,c,a))},t.getBestMask=function(s,i){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let u=0;u<o;u++){i(u),t.applyMask(u,s);const d=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(u,s),d<c&&(c=d,a=u)}return a}})(_t)),_t}var Qe={},En;function zs(){if(En)return Qe;En=1;const t=Rr(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Qe.getBlocksCount=function(s,i){switch(i){case t.L:return e[(s-1)*4+0];case t.M:return e[(s-1)*4+1];case t.Q:return e[(s-1)*4+2];case t.H:return e[(s-1)*4+3];default:return}},Qe.getTotalCodewordsCount=function(s,i){switch(i){case t.L:return r[(s-1)*4+0];case t.M:return r[(s-1)*4+1];case t.Q:return r[(s-1)*4+2];case t.H:return r[(s-1)*4+3];default:return}},Qe}var kt={},Le={},bn;function Vl(){if(bn)return Le;bn=1;const t=new Uint8Array(512),e=new Uint8Array(256);return(function(){let n=1;for(let s=0;s<255;s++)t[s]=n,e[n]=s,n<<=1,n&256&&(n^=285);for(let s=255;s<512;s++)t[s]=t[s-255]})(),Le.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},Le.exp=function(n){return t[n]},Le.mul=function(n,s){return n===0||s===0?0:t[e[n]+e[s]]},Le}var Tn;function Kl(){return Tn||(Tn=1,(function(t){const e=Vl();t.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(n[o],s[a]);return i},t.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},t.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=t.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(kt)),kt}var Ot,Rn;function Wl(){if(Rn)return Ot;Rn=1;const t=Kl();function e(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(n.length+this.degree);s.set(n);const i=t.mod(s,this.genPoly),o=this.degree-i.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(i,o),a}return i},Ot=e,Ot}var $t={},Lt={},Ut={},Cn;function Fs(){return Cn||(Cn=1,Ut.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Ut}var ue={},An;function Hs(){if(An)return ue;An=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;ue.KANJI=new RegExp(r,"g"),ue.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ue.BYTE=new RegExp(n,"g"),ue.NUMERIC=new RegExp(t,"g"),ue.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+r+"$"),i=new RegExp("^"+t+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ue.testKanji=function(c){return s.test(c)},ue.testNumeric=function(c){return i.test(c)},ue.testAlphanumeric=function(c){return o.test(c)},ue}var vn;function ve(){return vn||(vn=1,(function(t){const e=Fs(),r=Hs();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return r.testNumeric(i)?t.NUMERIC:r.testAlphanumeric(i)?t.ALPHANUMERIC:r.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,o){if(t.isValid(i))return i;try{return n(i)}catch{return o}}})(Lt)),Lt}var xn;function Gl(){return xn||(xn=1,(function(t){const e=Ae(),r=zs(),n=Rr(),s=ve(),i=Fs(),o=7973,a=e.getBCHDigit(o);function c(f,h,g){for(let m=1;m<=40;m++)if(h<=t.getCapacity(m,g,f))return m}function u(f,h){return s.getCharCountIndicator(f,h)+4}function d(f,h){let g=0;return f.forEach(function(m){const y=u(m.mode,h);g+=y+m.getBitsLength()}),g}function l(f,h){for(let g=1;g<=40;g++)if(d(f,g)<=t.getCapacity(g,h,s.MIXED))return g}t.from=function(h,g){return i.isValid(h)?parseInt(h,10):g},t.getCapacity=function(h,g,m){if(!i.isValid(h))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=s.BYTE);const y=e.getSymbolTotalCodewords(h),p=r.getTotalCodewordsCount(h,g),w=(y-p)*8;if(m===s.MIXED)return w;const E=w-u(m,h);switch(m){case s.NUMERIC:return Math.floor(E/10*3);case s.ALPHANUMERIC:return Math.floor(E/11*2);case s.KANJI:return Math.floor(E/13);case s.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(h,g){let m;const y=n.from(g,n.M);if(Array.isArray(h)){if(h.length>1)return l(h,y);if(h.length===0)return 1;m=h[0]}else m=h;return c(m.mode,m.getLength(),y)},t.getEncodedBits=function(h){if(!i.isValid(h)||h<7)throw new Error("Invalid QR Code version");let g=h<<12;for(;e.getBCHDigit(g)-a>=0;)g^=o<<e.getBCHDigit(g)-a;return h<<12|g}})($t)),$t}var Bt={},Pn;function Ql(){if(Pn)return Bt;Pn=1;const t=Ae(),e=1335,r=21522,n=t.getBCHDigit(e);return Bt.getEncodedBits=function(i,o){const a=i.bit<<3|o;let c=a<<10;for(;t.getBCHDigit(c)-n>=0;)c^=e<<t.getBCHDigit(c)-n;return(a<<10|c)^r},Bt}var zt={},Ft,In;function Jl(){if(In)return Ft;In=1;const t=ve();function e(r){this.mode=t.NUMERIC,this.data=r.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let s,i,o;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),o=parseInt(i,10),n.put(o,10);const a=this.data.length-s;a>0&&(i=this.data.substr(s),o=parseInt(i,10),n.put(o,a*3+1))},Ft=e,Ft}var Ht,Nn;function Yl(){if(Nn)return Ht;Nn=1;const t=ve(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(n){this.mode=t.ALPHANUMERIC,this.data=n}return r.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=e.indexOf(this.data[i])*45;o+=e.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(e.indexOf(this.data[i]),6)},Ht=r,Ht}var jt,Mn;function Xl(){if(Mn)return jt;Mn=1;const t=ve();function e(r){this.mode=t.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){for(let n=0,s=this.data.length;n<s;n++)r.put(this.data[n],8)},jt=e,jt}var qt,Dn;function Zl(){if(Dn)return qt;Dn=1;const t=ve(),e=Ae();function r(n){this.mode=t.KANJI,this.data=n}return r.getBitsLength=function(s){return s*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let s;for(s=0;s<this.data.length;s++){let i=e.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),n.put(i,13)}},qt=r,qt}var Vt={exports:{}},_n;function ed(){return _n||(_n=1,(function(t){var e={single_source_shortest_paths:function(r,n,s){var i={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,u,d,l,f,h,g,m,y;!a.empty();){c=a.pop(),u=c.value,l=c.cost,f=r[u]||{};for(d in f)f.hasOwnProperty(d)&&(h=f[d],g=l+h,m=o[d],y=typeof o[d]>"u",(y||m>g)&&(o[d]=g,a.push(d,g),i[d]=u))}if(typeof s<"u"&&typeof o[s]>"u"){var p=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(r,n){for(var s=[],i=n;i;)s.push(i),r[i],i=r[i];return s.reverse(),s},find_path:function(r,n,s){var i=e.single_source_shortest_paths(r,n,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,s={},i;r=r||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=r.sorter||n.default_sorter,s},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var s={value:r,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Vt)),Vt.exports}var kn;function td(){return kn||(kn=1,(function(t){const e=ve(),r=Jl(),n=Yl(),s=Xl(),i=Zl(),o=Hs(),a=Ae(),c=ed();function u(p){return unescape(encodeURIComponent(p)).length}function d(p,w,E){const S=[];let _;for(;(_=p.exec(E))!==null;)S.push({data:_[0],index:_.index,mode:w,length:_[0].length});return S}function l(p){const w=d(o.NUMERIC,e.NUMERIC,p),E=d(o.ALPHANUMERIC,e.ALPHANUMERIC,p);let S,_;return a.isKanjiModeEnabled()?(S=d(o.BYTE,e.BYTE,p),_=d(o.KANJI,e.KANJI,p)):(S=d(o.BYTE_KANJI,e.BYTE,p),_=[]),w.concat(E,S,_).sort(function(C,v){return C.index-v.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function f(p,w){switch(w){case e.NUMERIC:return r.getBitsLength(p);case e.ALPHANUMERIC:return n.getBitsLength(p);case e.KANJI:return i.getBitsLength(p);case e.BYTE:return s.getBitsLength(p)}}function h(p){return p.reduce(function(w,E){const S=w.length-1>=0?w[w.length-1]:null;return S&&S.mode===E.mode?(w[w.length-1].data+=E.data,w):(w.push(E),w)},[])}function g(p){const w=[];for(let E=0;E<p.length;E++){const S=p[E];switch(S.mode){case e.NUMERIC:w.push([S,{data:S.data,mode:e.ALPHANUMERIC,length:S.length},{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.ALPHANUMERIC:w.push([S,{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.KANJI:w.push([S,{data:S.data,mode:e.BYTE,length:u(S.data)}]);break;case e.BYTE:w.push([{data:S.data,mode:e.BYTE,length:u(S.data)}])}}return w}function m(p,w){const E={},S={start:{}};let _=["start"];for(let b=0;b<p.length;b++){const C=p[b],v=[];for(let T=0;T<C.length;T++){const P=C[T],R=""+b+T;v.push(R),E[R]={node:P,lastCount:0},S[R]={};for(let x=0;x<_.length;x++){const A=_[x];E[A]&&E[A].node.mode===P.mode?(S[A][R]=f(E[A].lastCount+P.length,P.mode)-f(E[A].lastCount,P.mode),E[A].lastCount+=P.length):(E[A]&&(E[A].lastCount=P.length),S[A][R]=f(P.length,P.mode)+4+e.getCharCountIndicator(P.mode,w))}}_=v}for(let b=0;b<_.length;b++)S[_[b]].end=0;return{map:S,table:E}}function y(p,w){let E;const S=e.getBestModeForData(p);if(E=e.from(w,S),E!==e.BYTE&&E.bit<S.bit)throw new Error('"'+p+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(S));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new r(p);case e.ALPHANUMERIC:return new n(p);case e.KANJI:return new i(p);case e.BYTE:return new s(p)}}t.fromArray=function(w){return w.reduce(function(E,S){return typeof S=="string"?E.push(y(S,null)):S.data&&E.push(y(S.data,S.mode)),E},[])},t.fromString=function(w,E){const S=l(w,a.isKanjiModeEnabled()),_=g(S),b=m(_,E),C=c.find_path(b.map,"start","end"),v=[];for(let T=1;T<C.length-1;T++)v.push(b.table[C[T]].node);return t.fromArray(h(v))},t.rawSplit=function(w){return t.fromArray(l(w,a.isKanjiModeEnabled()))}})(zt)),zt}var On;function rd(){if(On)return xt;On=1;const t=Ae(),e=Rr(),r=zl(),n=Fl(),s=Hl(),i=jl(),o=ql(),a=zs(),c=Wl(),u=Gl(),d=Ql(),l=ve(),f=td();function h(b,C){const v=b.size,T=i.getPositions(C);for(let P=0;P<T.length;P++){const R=T[P][0],x=T[P][1];for(let A=-1;A<=7;A++)if(!(R+A<=-1||v<=R+A))for(let I=-1;I<=7;I++)x+I<=-1||v<=x+I||(A>=0&&A<=6&&(I===0||I===6)||I>=0&&I<=6&&(A===0||A===6)||A>=2&&A<=4&&I>=2&&I<=4?b.set(R+A,x+I,!0,!0):b.set(R+A,x+I,!1,!0))}}function g(b){const C=b.size;for(let v=8;v<C-8;v++){const T=v%2===0;b.set(v,6,T,!0),b.set(6,v,T,!0)}}function m(b,C){const v=s.getPositions(C);for(let T=0;T<v.length;T++){const P=v[T][0],R=v[T][1];for(let x=-2;x<=2;x++)for(let A=-2;A<=2;A++)x===-2||x===2||A===-2||A===2||x===0&&A===0?b.set(P+x,R+A,!0,!0):b.set(P+x,R+A,!1,!0)}}function y(b,C){const v=b.size,T=u.getEncodedBits(C);let P,R,x;for(let A=0;A<18;A++)P=Math.floor(A/3),R=A%3+v-8-3,x=(T>>A&1)===1,b.set(P,R,x,!0),b.set(R,P,x,!0)}function p(b,C,v){const T=b.size,P=d.getEncodedBits(C,v);let R,x;for(R=0;R<15;R++)x=(P>>R&1)===1,R<6?b.set(R,8,x,!0):R<8?b.set(R+1,8,x,!0):b.set(T-15+R,8,x,!0),R<8?b.set(8,T-R-1,x,!0):R<9?b.set(8,15-R-1+1,x,!0):b.set(8,15-R-1,x,!0);b.set(T-8,8,1,!0)}function w(b,C){const v=b.size;let T=-1,P=v-1,R=7,x=0;for(let A=v-1;A>0;A-=2)for(A===6&&A--;;){for(let I=0;I<2;I++)if(!b.isReserved(P,A-I)){let M=!1;x<C.length&&(M=(C[x]>>>R&1)===1),b.set(P,A-I,M),R--,R===-1&&(x++,R=7)}if(P+=T,P<0||v<=P){P-=T,T=-T;break}}}function E(b,C,v){const T=new r;v.forEach(function(I){T.put(I.mode.bit,4),T.put(I.getLength(),l.getCharCountIndicator(I.mode,b)),I.write(T)});const P=t.getSymbolTotalCodewords(b),R=a.getTotalCodewordsCount(b,C),x=(P-R)*8;for(T.getLengthInBits()+4<=x&&T.put(0,4);T.getLengthInBits()%8!==0;)T.putBit(0);const A=(x-T.getLengthInBits())/8;for(let I=0;I<A;I++)T.put(I%2?17:236,8);return S(T,b,C)}function S(b,C,v){const T=t.getSymbolTotalCodewords(C),P=a.getTotalCodewordsCount(C,v),R=T-P,x=a.getBlocksCount(C,v),A=T%x,I=x-A,M=Math.floor(T/x),K=Math.floor(R/x),J=K+1,z=M-K,ee=new c(z);let W=0;const Q=new Array(x),ge=new Array(x);let ut=0;const qs=new Uint8Array(b.buffer);for(let xe=0;xe<x;xe++){const dt=xe<I?K:J;Q[xe]=qs.slice(W,W+dt),ge[xe]=ee.encode(Q[xe]),W+=dt,ut=Math.max(ut,dt)}const lt=new Uint8Array(T);let Cr=0,le,de;for(le=0;le<ut;le++)for(de=0;de<x;de++)le<Q[de].length&&(lt[Cr++]=Q[de][le]);for(le=0;le<z;le++)for(de=0;de<x;de++)lt[Cr++]=ge[de][le];return lt}function _(b,C,v,T){let P;if(Array.isArray(b))P=f.fromArray(b);else if(typeof b=="string"){let M=C;if(!M){const K=f.rawSplit(b);M=u.getBestVersionForData(K,v)}P=f.fromString(b,M||40)}else throw new Error("Invalid data");const R=u.getBestVersionForData(P,v);if(!R)throw new Error("The amount of data is too big to be stored in a QR Code");if(!C)C=R;else if(C<R)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+R+`.
`);const x=E(C,v,P),A=t.getSymbolSize(C),I=new n(A);return h(I,C),g(I),m(I,C),p(I,v,0),C>=7&&y(I,C),w(I,x),isNaN(T)&&(T=o.getBestMask(I,p.bind(null,I,v))),o.applyMask(T,I),p(I,v,T),{modules:I,version:C,errorCorrectionLevel:v,maskPattern:T,segments:P}}return xt.create=function(C,v){if(typeof C>"u"||C==="")throw new Error("No input text");let T=e.M,P,R;return typeof v<"u"&&(T=e.from(v.errorCorrectionLevel,e.M),P=u.from(v.version),R=o.from(v.maskPattern),v.toSJISFunc&&t.setToSJISFunction(v.toSJISFunc)),_(C,P,T,R)},xt}var Kt={},Wt={},$n;function js(){return $n||($n=1,(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},t.getImageWidth=function(n,s){const i=t.getScale(n,s);return Math.floor((n+s.margin*2)*i)},t.qrToImageData=function(n,s,i){const o=s.modules.size,a=s.modules.data,c=t.getScale(o,i),u=Math.floor((o+i.margin*2)*c),d=i.margin*c,l=[i.color.light,i.color.dark];for(let f=0;f<u;f++)for(let h=0;h<u;h++){let g=(f*u+h)*4,m=i.color.light;if(f>=d&&h>=d&&f<u-d&&h<u-d){const y=Math.floor((f-d)/c),p=Math.floor((h-d)/c);m=l[a[y*o+p]?1:0]}n[g++]=m.r,n[g++]=m.g,n[g++]=m.b,n[g]=m.a}}})(Wt)),Wt}var Ln;function nd(){return Ln||(Ln=1,(function(t){const e=js();function r(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,a){let c=a,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(i.modules.size,c),l=u.getContext("2d"),f=l.createImageData(d,d);return e.qrToImageData(f.data,i,c),r(l,u,d),l.putImageData(f,0,0),u},t.renderToDataURL=function(i,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(i,o,c),d=c.type||"image/png",l=c.rendererOpts||{};return u.toDataURL(d,l.quality)}})(Kt)),Kt}var Gt={},Un;function sd(){if(Un)return Gt;Un=1;const t=js();function e(s,i){const o=s.a/255,a=i+'="'+s.hex+'"';return o<1?a+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':a}function r(s,i,o){let a=s+i;return typeof o<"u"&&(a+=" "+o),a}function n(s,i,o){let a="",c=0,u=!1,d=0;for(let l=0;l<s.length;l++){const f=Math.floor(l%i),h=Math.floor(l/i);!f&&!u&&(u=!0),s[l]?(d++,l>0&&f>0&&s[l-1]||(a+=u?r("M",f+o,.5+h+o):r("m",c,0),c=0,u=!1),f+1<i&&s[l+1]||(a+=r("h",d),d=0)):c++}return a}return Gt.render=function(i,o,a){const c=t.getOptions(o),u=i.modules.size,d=i.modules.data,l=u+c.margin*2,f=c.color.light.a?"<path "+e(c.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",h="<path "+e(c.color.dark,"stroke")+' d="'+n(d,u,c.margin)+'"/>',g='viewBox="0 0 '+l+" "+l+'"',y='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+g+' shape-rendering="crispEdges">'+f+h+`</svg>
`;return typeof a=="function"&&a(null,y),y},Gt}var Bn;function id(){if(Bn)return Ie;Bn=1;const t=Bl(),e=rd(),r=nd(),n=sd();function s(i,o,a,c,u){const d=[].slice.call(arguments,1),l=d.length,f=typeof d[l-1]=="function";if(!f&&!t())throw new Error("Callback required as last argument");if(f){if(l<2)throw new Error("Too few arguments provided");l===2?(u=a,a=o,o=c=void 0):l===3&&(o.getContext&&typeof u>"u"?(u=c,c=void 0):(u=c,c=a,a=o,o=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(a=o,o=c=void 0):l===2&&!o.getContext&&(c=a,a=o,o=void 0),new Promise(function(h,g){try{const m=e.create(a,c);h(i(m,o,c))}catch(m){g(m)}})}try{const h=e.create(a,c);u(null,i(h,o,c))}catch(h){u(h)}}return Ie.create=e.create,Ie.toCanvas=s.bind(null,r.render),Ie.toDataURL=s.bind(null,r.renderToDataURL),Ie.toString=s.bind(null,function(i,o,a){return n.render(i,a)}),Ie}var od=id();const ad=Vs(od),ud=Ks(function(){const[e,r]=j.useState(""),[n,s]=j.useState(!0),[i,o]=j.useState(""),[a,c]=j.useState(null),[u,d]=j.useState(""),[l,f]=j.useState(""),[h,g]=j.useState(0),[m,y]=j.useState(""),[p,w]=j.useState(null),E=j.useRef(null),S=j.useRef([]),_=j.useRef(null),b=j.useRef(null),C=j.useRef(null);j.useEffect(()=>(v(),()=>{b.current&&clearInterval(b.current),C.current&&clearInterval(C.current)}),[]),j.useEffect(()=>{if(!p)return;const M=setInterval(()=>{const K=new Date,J=p.Expiration.getTime()-K.getTime();if(J<=0){d("Expired"),f("Expired");return}const z=Math.floor(J/6e4),ee=Math.floor(J%6e4/1e3);d(`${z}m ${ee}s`);const W=J-3e4;if(W<=0)f("Rotating now");else{const Q=Math.floor(W/6e4),ge=Math.floor(W%6e4/1e3);f(`${Q}m ${ge}s`)}},1e3);return()=>clearInterval(M)},[p]);const v=async()=>{try{const M=localStorage.getItem("awsAccessKey"),K=localStorage.getItem("awsSecretKey"),J=localStorage.getItem("iamRoleArn");if(!M||!K||!J){o("Missing required configuration"),s(!1);return}_.current=new Os({region:"us-west-2",credentials:{accessKeyId:M,secretAccessKey:K}});const z=await T();w(z),E.current=z,await R(z),s(!1),P();let ee=0;const Q=!1?30*1e3:120*1e3;C.current=setInterval(async()=>{if(ee<6){const ge=await T();S.current.push(ge),g(S.current.length),ee++}},Q)}catch(M){o(`Error initializing: ${M}`),s(!1)}},T=async()=>{const M=localStorage.getItem("iamRoleArn"),K=new Ul({RoleArn:M,RoleSessionName:`kvs-webrtc-${Date.now()}`,DurationSeconds:900}),z=(await _.current.send(K)).Credentials;return{AccessKeyId:z.AccessKeyId,SecretAccessKey:z.SecretAccessKey,SessionToken:z.SessionToken,Expiration:new Date(z.Expiration)}},P=()=>{b.current=setInterval(async()=>{try{if(!E.current)return;const M=new Date,J=E.current.Expiration.getTime()-M.getTime();if(console.log(`Time until expiry: ${Math.floor(J/1e3)}s, Pool size: ${S.current.length}`),J<3e4){console.log("Rotating credential - less than 30s left");const ee=(E.current?[E.current,...S.current]:S.current).filter(Q=>Q.Expiration.getTime()-M.getTime()>3e4);let W;ee.length>0?(ee.sort((Q,ge)=>Q.Expiration.getTime()-ge.Expiration.getTime()),W=ee[0],S.current=S.current.filter(Q=>Q!==W),console.log("Used oldest valid credential")):(W=await T(),console.log("Generated new credential")),w(W),E.current=W,await R(W),g(S.current.length)}}catch(M){console.error("Rotation failed:",M)}},2*1e3)},R=async M=>{const K=localStorage.getItem("signalingChannelName"),z=`https://sirknightj.github.io/amazon-kinesis-video-streams-webrtc-sdk-js/examples/index.html?${new URLSearchParams({channelName:K,region:"us-west-2",accessKeyId:M.AccessKeyId,secretAccessKey:M.SecretAccessKey,sessionToken:M.SessionToken,sendVideo:"false",sendAudio:"false","ingest-media":"true","ingest-media-manual-on":"false",openDataChannel:"false",view:"viewer"})}`;y(z);const ee=await ad.toDataURL(z);r(ee),c(M.Expiration)},x=()=>{m&&window.open(m,"_blank")},A=async()=>{try{console.log("Manual refresh triggered");let M;S.current.length>0?(M=S.current.shift(),console.log("Using credential from pool for manual refresh")):(console.log("Pool empty, generating new credential for manual refresh"),M=await T()),w(M),E.current=M,await R(M),g(S.current.length),console.log("Manual refresh complete")}catch(M){console.error("Manual refresh failed:",M),o(`Manual refresh failed: ${M}`)}},I=async()=>{m&&await navigator.clipboard.writeText(m)};return n?B.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:B.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md",children:B.jsx("p",{className:"text-gray-700",children:"Generating QR code..."})})}):i?B.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:B.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[B.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-600",children:"Error"}),B.jsx("p",{className:"text-gray-700",children:i})]})}):B.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:B.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[B.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"KVS WebRTC Viewer"}),p&&B.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[B.jsxs("p",{children:["Expires: ",p.Expiration.toLocaleString()," (",u,")"]}),B.jsxs("p",{className:"font-semibold",children:["QR rotates in: ",l]})]}),e&&B.jsx("img",{src:e,alt:"QR Code",className:"mx-auto mb-4"}),B.jsxs("div",{className:"space-x-2",children:[m&&B.jsx("button",{onClick:x,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Open in New Tab"}),B.jsx("button",{onClick:A,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Refresh QR Now"}),m&&B.jsx("button",{onClick:I,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Copy Link"})]})]})})});export{_e as f,it as t,ud as v};
